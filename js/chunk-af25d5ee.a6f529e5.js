(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af25d5ee"],{1148:function(e,t,a){"use strict";var s=a("a691"),r=a("1d80");e.exports="".repeat||function(e){var t=String(r(this)),a="",n=s(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(a+=t);return a}},"408a":function(e,t,a){var s=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=s(e))throw TypeError("Incorrect invocation");return+e}},4933:function(e,t,a){"use strict";var s=a("e400"),r=a.n(s);r.a},"4fad":function(e,t,a){var s=a("23e7"),r=a("6f53").entries;s({target:"Object",stat:!0},{entries:function(e){return r(e)}})},"6f3b":function(e,t,a){},"90f0":function(e,t,a){"use strict";var s=a("6f3b"),r=a.n(s);r.a},b680:function(e,t,a){"use strict";var s=a("23e7"),r=a("a691"),n=a("408a"),i=a("1148"),l=a("d039"),c=1..toFixed,o=Math.floor,u=function(e,t,a){return 0===t?a:t%2===1?u(e,t-1,a*e):u(e*e,t/2,a)},m=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},p=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){c.call({})}));s({target:"Number",proto:!0,forced:p},{toFixed:function(e){var t,a,s,l,c=n(this),p=r(e),d=[0,0,0,0,0,0],h="",f="0",b=function(e,t){var a=-1,s=t;while(++a<6)s+=e*d[a],d[a]=s%1e7,s=o(s/1e7)},v=function(e){var t=6,a=0;while(--t>=0)a+=d[t],d[t]=o(a/e),a=a%e*1e7},_=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==d[e]){var a=String(d[e]);t=""===t?a:t+i.call("0",7-a.length)+a}return t};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(t=m(c*u(2,69,1))-69,a=t<0?c*u(2,-t,1):c/u(2,t,1),a*=4503599627370496,t=52-t,t>0){b(0,a),s=p;while(s>=7)b(1e7,0),s-=7;b(u(10,s,1),0),s=t-1;while(s>=23)v(1<<23),s-=23;v(1<<s),b(1,1),v(2),f=_()}else b(0,a),b(1<<-t,0),f=_()+i.call("0",p);return p>0?(l=f.length,f=h+(l<=p?"0."+i.call("0",p-l)+f:f.slice(0,l-p)+"."+f.slice(l-p))):f=h+f,f}})},e07a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticStyle:{display:"flex"}},[a("el-card",{staticClass:"config-zone"},[a("el-form",{ref:"form-basic",attrs:{inline:!0,size:"mini",model:e.formBasic,"label-width":"10em"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"Backend"}},[a("el-select",{attrs:{placeholder:"Select Backend","value-key":"name"},on:{change:e.changeBackend},model:{value:e.selectedBackend,callback:function(t){e.selectedBackend=t},expression:"selectedBackend"}},e._l(e.backends,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"Wrapper"}},[a("el-select",{attrs:{placeholder:"Select Wrapper"},model:{value:e.formBasic.wrapper,callback:function(t){e.$set(e.formBasic,"wrapper",t)},expression:"formBasic.wrapper"}},e._l(e.wrappers,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-form",{ref:"form-config",attrs:{inline:!0,size:"mini",model:e.piBenchParams,"label-width":"10em"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"Threads"}},[a("el-input-number",{attrs:{step:1,min:1,max:10},model:{value:e.piBenchParams.thread_cnt,callback:function(t){e.$set(e.piBenchParams,"thread_cnt",t)},expression:"piBenchParams.thread_cnt"}})],1),a("el-form-item",{attrs:{label:"Operations"}},[a("el-input-number",{attrs:{step:1e3,min:1},model:{value:e.piBenchParams.op_cnt,callback:function(t){e.$set(e.piBenchParams,"op_cnt",t)},expression:"piBenchParams.op_cnt"}})],1),a("el-form-item",{attrs:{label:"Load Count"}},[a("el-input-number",{attrs:{step:1,min:1,max:10},model:{value:e.piBenchParams.load_cnt,callback:function(t){e.$set(e.piBenchParams,"load_cnt",t)},expression:"piBenchParams.load_cnt"}})],1),a("el-form-item",{attrs:{label:"Read Ratio"}},[a("el-input-number",{attrs:{step:.1,min:0,max:1},model:{value:e.piBenchParams.read,callback:function(t){e.$set(e.piBenchParams,"read",t)},expression:"piBenchParams.read"}})],1),a("el-form-item",{attrs:{label:"Insert Ratio"}},[a("el-input-number",{attrs:{step:.1,min:0,max:1},model:{value:e.piBenchParams.insert,callback:function(t){e.$set(e.piBenchParams,"insert",t)},expression:"piBenchParams.insert"}})],1),a("el-form-item",{attrs:{label:"Update Ratio"}},[a("el-input-number",{attrs:{step:.1,min:0,max:1},model:{value:e.piBenchParams.update,callback:function(t){e.$set(e.piBenchParams,"update",t)},expression:"piBenchParams.update"}})],1),a("el-form-item",{attrs:{label:"Delete Ratio"}},[a("el-input-number",{attrs:{step:.1,min:0,max:1},model:{value:e.piBenchParams.delete,callback:function(t){e.$set(e.piBenchParams,"delete",t)},expression:"piBenchParams.delete"}})],1),a("el-form-item",{attrs:{label:"Latency Sampling"}},[a("el-input-number",{attrs:{step:.1,min:0,max:1},model:{value:e.piBenchParams.latency_sampling,callback:function(t){e.$set(e.piBenchParams,"latency_sampling",t)},expression:"piBenchParams.latency_sampling"}})],1),a("el-form-item",{attrs:{label:"Sample Time (ms)"}},[a("el-input-number",{attrs:{step:100,min:100,max:2e3},model:{value:e.piBenchParams.sample_time,callback:function(t){e.$set(e.piBenchParams,"sample_time",t)},expression:"piBenchParams.sample_time"}})],1),a("el-form-item",{attrs:{label:"Key Size"}},[a("el-input-number",{attrs:{min:4,step:1},model:{value:e.piBenchParams.key_size,callback:function(t){e.$set(e.piBenchParams,"key_size",t)},expression:"piBenchParams.key_size"}})],1),a("el-form-item",{attrs:{label:"Value Size"}},[a("el-input-number",{attrs:{min:4,step:1},model:{value:e.piBenchParams.value_size,callback:function(t){e.$set(e.piBenchParams,"value_size",t)},expression:"piBenchParams.value_size"}})],1),a("el-form-item",{attrs:{label:"Scan Size"}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.piBenchParams.scan_size,callback:function(t){e.$set(e.piBenchParams,"scan_size",t)},expression:"piBenchParams.scan_size"}})],1),a("el-form-item",{attrs:{label:"Pool Size"}},[a("el-input-number",{attrs:{min:1,step:1},model:{value:e.piBenchParams.pool_size,callback:function(t){e.$set(e.piBenchParams,"pool_size",t)},expression:"piBenchParams.pool_size"}})],1),a("el-form-item",{attrs:{label:"Seed"}},[a("el-input-number",{attrs:{step:1},model:{value:e.piBenchParams.seed,callback:function(t){e.$set(e.piBenchParams,"seed",t)},expression:"piBenchParams.seed"}})],1),a("el-form-item",{attrs:{label:"Key Prefix"}},[a("el-input",{model:{value:e.piBenchParams.key_prefix,callback:function(t){e.$set(e.piBenchParams,"key_prefix",t)},expression:"piBenchParams.key_prefix"}})],1),a("el-form-item",{attrs:{label:"Use PCM"}},[a("el-switch",{model:{value:e.piBenchParams.use_pcm,callback:function(t){e.$set(e.piBenchParams,"use_pcm",t)},expression:"piBenchParams.use_pcm"}})],1),a("el-form-item",{attrs:{label:"Pool Path"}},[a("el-input",{model:{value:e.piBenchParams.pool_path,callback:function(t){e.$set(e.piBenchParams,"pool_path",t)},expression:"piBenchParams.pool_path"}})],1),a("el-form-item",{attrs:{label:"Skip Load"}},[a("el-switch",{model:{value:e.piBenchParams.skip_load,callback:function(t){e.$set(e.piBenchParams,"skip_load",t)},expression:"piBenchParams.skip_load"}})],1),a("el-form-item",{attrs:{label:"Distribution"}},[a("el-select",{attrs:{placeholder:"Distribution"},model:{value:e.piBenchParams.distribution,callback:function(t){e.$set(e.piBenchParams,"distribution",t)},expression:"piBenchParams.distribution"}},e._l(e.possibleDistributions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"Env"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.env,callback:function(t){e.env=t},expression:"env"}})],1),a("el-form-item",[a("el-button",{on:{click:e.savePreset}},[e._v("Save Preset")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.startBenchmark}},[e._v("Start")])],1)],1)],1),e.showResult?a("el-card",{staticClass:"result-zone"},[a("results",{directives:[{name:"loading",rawName:"v-loading",value:e.resultLoading,expression:"resultLoading"}],ref:"results"})],1):e._e()],1)])},r=[],n=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("159b"),a("96cf"),a("ade3")),i=a("d722"),l=a("ebb5"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{height:"400px",width:"500px"},attrs:{id:"chart"}}),e.benchmarkResults?a("div",[a("div",[a("div",{staticClass:"sub-title"},[e._v("Benchmark Environments")]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v("CPU")]),a("div",{staticClass:"result-value"},[e._v(e._s(e.benchmarkResults.env.cpu))])]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v("CPU Cache")]),a("div",{staticClass:"result-value"},[e._v(e._s(e.benchmarkResults.env.cache))])]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v("Kernel")]),a("div",{staticClass:"result-value"},[e._v(e._s(e.benchmarkResults.env.kernel))])]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v("System Time")]),a("div",{staticClass:"result-value"},[e._v(e._s(e.benchmarkResults.env.time))])])]),a("div",[a("div",{staticClass:"sub-title"},[e._v("Basic Results")]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v("Run Time")]),a("div",{staticClass:"result-value"},[e._v(e._s(e.benchmarkResults.results.run_time)+"s")])]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v("Load Time")]),a("div",{staticClass:"result-value"},[e._v(e._s(e.benchmarkResults.results.load_time)+"s")])]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v("Throughput")]),a("div",{staticClass:"result-value"},[e._v(e._s(e.benchmarkResults.results.throughput)+" ops/s")])])]),e.benchmarkResults["results"]["pcm"]?a("div",{staticStyle:{"margin-top":"1em"}},[a("div",{staticClass:"sub-title"},[e._v("PCM Results:")]),e._l(Object.entries(e.benchmarkResults.results.pcm),(function(t){return a("div",{key:t[0],staticStyle:{display:"flex"}},[a("div",{staticClass:"result-category"},[e._v(e._s(t[0]))]),a("div",[e._v(e._s(t[1]))])])}))],2):e._e(),a("section",{staticStyle:{"margin-top":"1em"}},[a("el-button",{attrs:{size:"small"},on:{click:e.saveResult}},[e._v("Save Result")])],1)]):e._e()])},o=[],u=(a("d81d"),a("b680"),a("4fad"),a("07ac"),a("313e")),m=a.n(u),p=a("2f62");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=a("0644"),b={name:"Results",props:{},data:function(){return{benchmarkResults:null,benchmarkParams:null}},computed:{basicResults:function(){return Object.entries(this.benchmarkResults["basics"]).filter((function(e){return"samplings"!==e[0]&&"latency"!==e[0]}))}},methods:h({},Object(p["b"])(["addBenchmarkResult"]),{updateResults:function(e,t){this.benchmarkResults=e,this.benchmarkParams=t,this.plotFigure(e)},saveResult:function(){this.addBenchmarkResult({result:f(this.benchmarkResults),param:f(this.benchmarkParams)}),this.$message("Benchmark result saved!")},plotFigure:function(e){var t=m.a.init(document.getElementById("chart")),a=Object.keys(e.results.latency),s=Object.values(e.results.latency);t.setOption({title:{text:"Benchmark Result"},tooltip:{trigger:"axis"},toolbox:{feature:{dataView:{show:!0,readOnly:!1,title:"Dataview"},restore:{show:!0,title:"Restore"},saveAsImage:{show:!0,title:"Save As Image"}}},grid:[{height:"32%"},{top:"60%",height:"32%"}],xAxis:[{type:"category",name:"Time",data:e.results["samples"].map((function(t,a){return e.options.sampling*a})),gridIndex:0,axisLine:{onZero:!0}},{type:"category",name:"Sampling",data:a,gridIndex:1,axisLine:{onZero:!0}}],yAxis:[{type:"value",name:"Throughput",axisLabel:{formatter:function(t){return(t/1e6*1e3/e.options.sampling).toFixed(2)+" M"}},gridIndex:0},{type:"value",name:"Latency (ns)",gridIndex:1,axisLabel:{formatter:function(e){return e/1e3+" us"}}}],series:[{type:"line",data:e.results.samples,xAxisIndex:0,yAxisIndex:0,name:"Samplings"},{type:"line",data:s,xAxisIndex:1,yAxisIndex:1,name:"Latency"}]})}})},v=b,_=(a("90f0"),a("2877")),g=Object(_["a"])(v,c,o,!1,null,"7785e3e8",null),P=g.exports;function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={name:"Benchmark",props:{},components:{results:P},data:function(){return{wrappers:[],formBasic:{},possibleDistributions:["UNIFORM","ZIPFAN"],piBenchParams:{thread_cnt:1,op_cnt:3e6,load_cnt:1e3,read:0,insert:1,delete:0,update:0,sample_time:100,scan_size:100,key_size:8,value_size:8,key_prefix:"",use_pcm:!1,seed:42,skip_load:!0,pool_size:1048576,pool_path:"pool.data",distribution:"UNIFORM",latency_sampling:.1},env:"PMEM_IS_PMEM_FORCE=1,",showResult:!1,resultLoading:!0,serverResponse:{},selectedBackend:{}}},computed:Object(p["c"])(["backends","configPresets"]),methods:k({},Object(p["b"])({addConfigPreset:"addConfigPreset"}),{savePreset:function(){var e={basic:this.formBasic,params:this.piBenchParams,env:this.env};this.addConfigPreset({name:"preset".concat(this.configPresets.length),data:e})},startBenchmark:function(){var e,t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e={basic:this.formBasic,params:this.piBenchParams,env:this.env},a.next=3,regeneratorRuntime.awrap(Object(i["c"])(this.formBasic.backend,e));case 3:if(t=a.sent,"Ok"===t["result"]){a.next=8;break}return this.$message("Server Error!"),console.log(t),a.abrupt("return");case 8:return this.$message("Benchmark started!"),this.resultLoading=!0,this.serverResponse=t,a.next=13,regeneratorRuntime.awrap(this.checkServerStatus());case 13:case"end":return a.stop()}}),null,this)},checkServerStatus:function(){var e,t,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(this.serverResponse["pid"]){s.next=2;break}return s.abrupt("return");case 2:this.showResult=!0,this.resultLoading=!0,e=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t={status:"running"};case 6:return s.next=8,regeneratorRuntime.awrap(e(1e3));case 8:return s.next=10,regeneratorRuntime.awrap(Object(i["b"])(this.formBasic.backend,this.serverResponse["pid"]));case 10:t=s.sent;case 11:if("running"===t["status"]){s.next=6;break}case 12:if("finished"===t["status"]){this.$message("Server finished the benchmark!");try{a=l["a"].from_text(t["data"]).to_js_value(),console.log(a),this.$refs.results.updateResults(a,{basic:this.formBasic,params:this.piBenchParams,env:this.env}),this.resultLoading=!1}catch(r){this.$message("Failed to parse the result, check the console for raw result"),console.error(r),console.log(t),console.log(t["data"])}}case 13:case"end":return s.stop()}}),null,this)},changeBackend:function(e){this.formBasic.backend=e.url,this.wrappers=e.wrappers}})},B=x,w=(a("4933"),Object(_["a"])(B,s,r,!1,null,"35132987",null));t["default"]=w.exports},e400:function(e,t,a){}}]);
//# sourceMappingURL=chunk-af25d5ee.a6f529e5.js.map